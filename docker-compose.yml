version: '3.8'

services:
    tests:
        container_name: tests
        build: 
            context: .
        environment:
            HOST_DIR: "$PWD" # Nessessary to mount test resources to child containers
            KUBECONFIG: /root/.kube/config
        volumes:
            - ./:/usr/src/code
            - /var/run/docker.sock:/var/run/docker.sock
            - /tmp/kube-config/config:/root/.kube/config:ro